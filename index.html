<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Biolo-Gio | Enciclopedia degli animali</title>
<meta name="description" content="Schede divulgative chiare e ricche su animali, habitat, dieta, comportamento, riproduzione, ruolo ecologico e curiositÃ . Perfetto per GitHub Pages." />
<style>
  :root{
    --bg:#f8fafc; --panel:#ffffff; --muted:#475569; --text:#0f172a;
    --brand:#06b6d4; --brand-2:#8b5cf6; --accent:#10b981; --card:#ffffff; --ring:#22d3ee55; --radius:18px;
    --t0:#ffffff; --t1:#f1f5f9; --pattern:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'/>");
    --grain:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'><g opacity='.08' fill='%23000000'><circle cx='6' cy='6' r='1.2'/><circle cx='32' cy='20' r='1'/><circle cx='58' cy='10' r='1'/><circle cx='14' cy='42' r='1.1'/><circle cx='48' cy='48' r='1'/><circle cx='70' cy='30' r='1.1'/><circle cx='22' cy='68' r='1'/><circle cx='64' cy='66' r='1.1'/></g></svg>");
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; color:var(--text); background:#f1f5f9; line-height:1.6;}

  header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(120%) blur(10px); background:linear-gradient(180deg, #ffffffee, #ffffffcc); border-bottom:1px solid #e2e8f0}
  .wrap{max-width:1180px; margin:auto; padding:16px}
  .topbar{display:flex; align-items:center; gap:16px}
  .logo{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
  .logo .mark{width:38px;height:38px;border-radius:12px;display:grid;place-items:center; background: conic-gradient(from 210deg, var(--brand), var(--brand-2) 40%, var(--accent)); box-shadow:0 0 0 4px #00000005 inset, 0 10px 30px #0001;}
  .logo b{font-size:20px; letter-spacing:.3px}
  nav{margin-left:auto; display:flex; gap:14px; flex-wrap:wrap}
  nav a{color:var(--muted); text-decoration:none; padding:8px 12px; border-radius:10px}
  nav a:hover{color:var(--text); background:#e2e8f0}

  .hero{display:grid; gap:4px; padding:24px 0 8px}
  .hero h1{margin:0; font-size:clamp(28px, 4vw, 44px); line-height:1.15}
  .hero p{margin:0; color:var(--muted)}

  .panel{background:var(--panel); border:1px solid #e2e8f0; border-radius:var(--radius); box-shadow:0 8px 30px #0000000d}
  .panel.pad{padding:16px}

  .controls{display:grid; grid-template-columns:1fr 200px; gap:12px; align-items:center}
  .search{position:relative}
  .search input{width:100%; padding:14px 44px 14px 14px; border-radius:12px; border:1px solid #cbd5e1; background:#ffffff; color:var(--text)}
  .search input:focus{outline:none; box-shadow:0 0 0 6px var(--ring)}
  .search .icon{position:absolute; right:12px; top:50%; transform:translateY(-50%); opacity:.6}
  select{width:100%; padding:14px; border-radius:12px; border:1px solid #cbd5e1; background:#ffffff; color:var(--text)}

  .grid{display:grid; grid-template-columns:repeat(auto-fill, minmax(240px,1fr)); gap:16px; margin-top:16px}
  .card{background:var(--card); border:1px solid #e2e8f0; border-radius:16px; overflow:hidden; transition:transform .15s ease, box-shadow .15s ease}
  .card:hover{transform:translateY(-4px); box-shadow:0 12px 30px #00000014}
  .thumb{height:160px; display:grid; place-items:center; font-size:72px; position:relative; overflow:hidden}
  .thumb::after{content:""; position:absolute; inset:0; background-image:var(--grain); background-size:80px 80px; pointer-events:none;}
  .thumb .emoji{position:relative; z-index:1; filter: drop-shadow(0 2px 6px rgba(0,0,0,.12));}

  /* Habitat (gradiente base + pattern SVG leggero) */
  .hab-foresta{background-image: linear-gradient(135deg,#dcfce7,#bbf7d0), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='220' height='220' opacity='0.18'><g fill='none' stroke='%231a6e2a' stroke-width='2'><path d='M10 200c30-30 90-30 120 0'/><path d='M0 160c30-30 90-30 120 0'/></g><g fill='%231a6e2a'><circle cx='30' cy='40' r='5'/><circle cx='150' cy='90' r='4'/></g></svg>"); background-size:cover, 160px 160px}
  .hab-savana{background-image: linear-gradient(135deg,#fef9c3,#fde68a), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='240' opacity='0.16'><path d='M0 180c40-12 80-12 240 0' fill='none' stroke='%236b4f1d' stroke-width='2'/><path d='M0 140c40-12 80-12 240 0' fill='none' stroke='%23865e1d' stroke-width='2'/></svg>"); background-size:cover, 160px 160px}
  .hab-oceano{background-image: linear-gradient(135deg,#e0f2fe,#bae6fd), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='240' opacity='0.18'><path d='M0 60q40 25 80 0t80 0t80 0' fill='none' stroke='%231084b3' stroke-width='2'/><path d='M0 120q40 25 80 0t80 0t80 0' fill='none' stroke='%230d5b8f' stroke-width='2'/></svg>"); background-size:cover, 160px 160px}
  .hab-montagna{background-image: linear-gradient(135deg,#e2e8f0,#cbd5e1), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='260' height='160' opacity='0.14'><path d='M0 120L40 80l20 20 20-25 40 45H0z' fill='%23cbd5e1'/></svg>"); background-size:cover, 160px 160px}
  .hab-ghiaccio{background-image: linear-gradient(135deg,#f1f5f9,#e0f2fe), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200' opacity='0.16'><g fill='none' stroke='%230e7490' stroke-width='1.6'><path d='M100 0v200M0 100h200'/><path d='M50 0v200M0 50h200'/></g></svg>"); background-size:cover, 140px 140px}
  .hab-deserto{background-image: linear-gradient(135deg,#ffedd5,#fed7aa), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='240' height='240' opacity='0.16'><path d='M0 180c50-20 100-20 240 0' fill='none' stroke='%23a16207' stroke-width='2'/></svg>"); background-size:cover, 160px 160px}
  .hab-prateria{background-image: linear-gradient(135deg,#d1fae5,#a7f3d0), url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='220' height='220' opacity='0.14'><path d='M0 200l10-20 10 20 10-25 10 25 10-18 10 18 10-22 10 22 10-19 10 19' fill='none' stroke='%230f766e' stroke-width='2'/></svg>"); background-size:cover, 160px 160px}

  .badge{display:inline-block; padding:4px 8px; border:1px solid #c7d2fe; border-radius:999px; font-size:12px; color:#4338ca; background:#eef2ff}
  .card .body{padding:12px 14px}
  .card h3{margin:0 0 6px; font-size:18px}
  .meta{font-size:13px; color:var(--muted)}
  .card .actions{display:flex; gap:8px; margin-top:12px}
  .btn{appearance:none; border:none; padding:10px 12px; border-radius:10px; background:#dbf4ff; color:#0c4a6e; cursor:pointer; text-decoration:none; display:inline-flex; gap:8px; align-items:center}
  .btn:hover{background:#bae6fd}

  /* ===== LAYOUT SCHEDA ===== */
  .detail{margin-top:24px; display:grid; grid-template-columns:1.6fr 0.9fr; gap:18px}
  .hero-animal{border-radius:16px; overflow:hidden; position:relative; border:1px solid #e2e8f0}
  .hero-animal .banner{height:180px; display:grid; place-items:center; font-size:96px}
  .hero-animal .banner::after{content:"";position:absolute;inset:0;background-image:var(--grain);background-size:80px 80px;opacity:.8;mix-blend-mode:overlay;pointer-events:none}
  .hero-animal .head{display:flex; gap:16px; align-items:center; padding:12px 16px}
  .hero-animal h2{margin:0}
  .quick{position:sticky; top:90px; align-self:start}
  .quick .kv{display:grid; grid-template-columns:auto 1fr; gap:8px 12px; font-size:14px}
  .chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:#f1f5f9; border:1px solid #e2e8f0; font-size:12px}

  .toc{display:flex; flex-wrap:wrap; gap:8px; padding:8px 0}
  .toc a{padding:6px 10px; border:1px solid #e2e8f0; border-radius:999px; text-decoration:none; color:#334155; background:#fff}
  .toc a:hover{background:#f8fafc}

  .section{scroll-margin-top:100px}
  .section h3{margin:0 0 8px}

  /* ===== Accordion ===== */
  details.acc{border:1px solid #e2e8f0; border-radius:12px; background:#fff; margin:14px 0; overflow:hidden}
  details.acc[open]{box-shadow:0 8px 24px #0000000d}
  summary.acc-sum{list-style:none; cursor:pointer; padding:12px 14px; display:flex; align-items:center; gap:10px; font-weight:600}
  summary.acc-sum::marker{display:none}
  summary.acc-sum .chev{transition:transform .2s ease; opacity:.7}
  details[open] summary.acc-sum .chev{transform:rotate(90deg)}
  .acc-body{padding:0 14px 14px}

  .accordion-tools{display:flex; gap:8px; flex-wrap:wrap}
  .btn-ghost{background:#fff; border:1px solid #e2e8f0; color:#334155}
  .btn-ghost:hover{background:#f8fafc}

  .callout{background:#ecfeff; border:1px solid #bae6fd; padding:10px 12px; border-radius:12px; font-size:14px}

  .toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%) translateY(40px);background:linear-gradient(135deg,var(--brand),var(--brand-2));color:white;padding:10px 18px;border-radius:12px;box-shadow:0 8px 30px #00000026;opacity:0;pointer-events:none;transition:opacity .35s, transform .35s;z-index:9999}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

  footer{margin:30px 0 60px; color:var(--muted)}
  footer a{color:var(--brand)}
  @media (max-width:900px){ .detail{grid-template-columns:1fr} .quick{position:relative; top:auto} }

  /* ===== Tema pagina con pattern evidenti ===== */
  @keyframes drift { 0%{background-position:0 0, 0 0, 0 0, 200px 200px} 100%{background-position:0 0, 0 0, 0 0, 400px 400px} }
  body[class*="theme-"]{
    background-attachment: fixed;
    background-image:
      linear-gradient(180deg, var(--t0), var(--t1) 60%),
      radial-gradient(900px 700px at 110% 0%, rgba(255,255,255,.45), transparent),
      var(--pattern),
      var(--grain);
    background-size:auto, auto, 140px 140px, 80px 80px;
    background-blend-mode: normal, normal, normal, overlay;
    animation: drift 120s linear infinite;
  }

  /* === PATCH: pattern garantito senza immagini (solo CSS) === */
  body[class*="theme-"]{
    background-image:
      linear-gradient(180deg, var(--t0), var(--t1) 60%),
      radial-gradient(900px 700px at 110% 0%, rgba(255,255,255,.45), transparent),
      repeating-radial-gradient(circle at 25% 25%, rgba(0,0,0,.06) 0 2px, transparent 2px 12px),
      repeating-linear-gradient(135deg, rgba(0,0,0,.05) 0 10px, transparent 10px 22px);
    background-size: auto, auto, 140px 140px, 160px 160px !important;
    background-blend-mode: normal, normal, overlay, overlay;
  }
  .thumb[class^="hab-"], .hero-animal .banner{ position: relative; }
  .thumb[class^="hab-"]::before, .hero-animal .banner::before{
    content:""; position:absolute; inset:0; pointer-events:none;
    background-image:
      repeating-linear-gradient( 45deg, rgba(255,255,255,.28) 0 8px, transparent 8px 16px),
      repeating-radial-gradient( circle at 20% 30%, rgba(0,0,0,.06) 0 1.8px, transparent 1.8px 10px);
    background-size: 200px 200px, 160px 160px; mix-blend-mode: soft-light;
  }
  .hab-foresta::before  { background-image: repeating-linear-gradient(60deg, rgba(255,255,255,.26) 0 8px, transparent 8px 16px), repeating-radial-gradient(circle at 30% 70%, rgba(0,0,0,.07) 0 2px, transparent 2px 11px); }
  .hab-savana::before   { background-image: repeating-linear-gradient( 0deg, rgba(255,255,255,.22) 0 10px, transparent 10px 20px), repeating-radial-gradient(circle at 80% 20%, rgba(0,0,0,.06) 0 1.8px, transparent 1.8px 12px); }
  .hab-oceano::before   { background-image: repeating-linear-gradient( 90deg, rgba(255,255,255,.22) 0 6px, transparent 6px 14px),  repeating-linear-gradient( -45deg, rgba(0,0,0,.05) 0 2px, transparent 2px 12px); }
  .hab-montagna::before { background-image: repeating-linear-gradient(135deg, rgba(255,255,255,.23) 0 10px, transparent 10px 20px), repeating-linear-gradient( -45deg, rgba(0,0,0,.05) 0 2px, transparent 2px 14px); }
  .hab-ghiaccio::before { background-image: repeating-linear-gradient( 90deg, rgba(255,255,255,.30) 0 8px, transparent 8px 16px), repeating-linear-gradient( 0deg, rgba(0,0,0,.05) 0 2px, transparent 2px 14px); }
  .hab-deserto::before  { background-image: repeating-linear-gradient( 15deg, rgba(255,255,255,.22) 0 10px, transparent 10px 20px), repeating-linear-gradient(165deg, rgba(0,0,0,.05) 0 2px, transparent 2px 14px); }
  .hab-prateria::before { background-image: repeating-linear-gradient( 45deg, rgba(255,255,255,.24) 0 10px, transparent 10px 20px), repeating-radial-gradient(circle at 70% 40%, rgba(0,0,0,.06) 0 2px, transparent 2px 12px); }
</style>
</head>
<body>
<header>
  <div class="wrap topbar">
    <a class="logo" href="#/home" aria-label="Biolo-Gio home">
      <div class="mark">ðŸ§¬</div>
      <b>Biolo-Gio</b>
    </a>
    <nav>
      <a href="#/home">Home</a>
      <a href="#/animali">Animali</a>
      <a href="#/curiosita">CuriositÃ </a>
      <a href="#/contatti">Contatti</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <h1>Enciclopedia degli animali, chiara e completa.</h1>
    <p>Descrizione sempre visibile; le altre sezioni si aprono con un click. Sfondi che richiamano lâ€™habitat con texture leggere.</p>
  </section>

  <section class="panel pad" id="controls">
    <div class="controls">
      <label class="search">
        <input id="q" placeholder="Cerca per nome, habitat, dietaâ€¦ (es. falco, savana, insettivoro)" autocomplete="off" />
        <span class="icon">ðŸ”Ž</span>
      </label>
      <label>
        <select id="filterClass">
          <option value="">Tutte le classi</option>
          <option>Mammiferi</option>
          <option>Uccelli</option>
          <option>Rettili</option>
          <option>Anfibi</option>
          <option>Pesci</option>
          <option>Invertebrati</option>
        </select>
      </label>
    </div>
    <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
      <button class="btn" id="btnRandom">ðŸŽ² Animale casuale</button>
      <span class="meta">Premi <kbd>R</kbd> per pescarne uno a caso.</span>
    </div>
  </section>

  <section id="view"></section>

  <footer>
    <p>Progetto <b>Biolo-Gio</b>. Un solo file, massima semplicitÃ . Pubblica su GitHub Pages e diffondi la meraviglia del regno animale.</p>
  </footer>
</main>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
/* ==========================
   DATI â€” 20 specie totali (testi discorsivi)
   ========================== */
const ANIMALS = [
  /* â€”â€”â€”â€”â€” LE 20 SPECIE GIÃ€ PRESENTI â€”â€”â€”â€”â€” */
  {name:"Wombat",scientificName:"Vombatus ursinus",class:"Mammiferi",emoji:"ðŸªµ",habitat:"Praterie e foreste aperte dell'Australia sud-orientale",diet:"Erbivoro (erbe, cortecce, radici)",lifespan:"10â€“15 anni",size:"20â€“35 kg; ~1 m",conservation:"Least Concern",
  description:"Il wombat Ã¨ un bulldozer gentile: scava reti di gallerie che aerano il suolo e offrono rifugio a molte specie. Metabolismo lento, dieta povera e gestione estrema dellâ€™acqua; famose le feci cubiche che usa come segnali olfattivi.",
  sociality:"Condivide le reti di tane in tempi diversi. Territoriale attorno agli ingressi: difesa con testate e ostinazione. Notturno, attento ma curioso.",
  feeding:"Bruca vegetali duri; digestione lunghissima con grande recupero dâ€™acqua. Ritmo rallentato nei periodi secchi.",
  reproduction:"Un solo piccolo nel marsupio rivolto allâ€™indietro (cosÃ¬ non entra terra). Apprende percorsi e uscite seguendo la madre.",
  interactions:"Le gallerie creano microhabitat umidi; rifugi per altri animali. Predatori: dingo e cani.",
  human:"Rischi: strade e recinzioni. Sottopassi e varchi riducono gli incidenti.",
  facts:["Tane ramificate","Marsupio allâ€™indietro","Digestione lentissima","Feci cubiche","Scatto a 40 km/h"]},

  {name:"Falco pellegrino",scientificName:"Falco peregrinus",class:"Uccelli",emoji:"ðŸª¶",habitat:"Scogliere, montagne e cittÃ  in tutto il mondo",diet:"Carnivoro (uccelli in volo)",lifespan:"~15 anni",size:"Apertura alare 80â€“120 cm",conservation:"Least Concern",
  description:"Progetto aerodinamico con le piume: in picchiata supera i 300 km/h, controllando lâ€™aria come un velivolo. Vista finissima e becco con â€˜denteâ€™ per uccisione rapida.",
  sociality:"Coppie territoriali fedeli ai siti; tetti e campanili sono â€˜scogliere urbaneâ€™.",
  feeding:"Colpisce in picchiata, stordisce e recupera la preda. Efficiente e preciso.",
  reproduction:"2â€“4 uova su cenge o tetti ghiaiosi; scuola di volo ai giovani con passaggi in aria.",
  interactions:"Regola piccioni e storni in cittÃ ; subisce mobbing da corvidi e gabbiani.",
  human:"Crollato ai tempi del DDT, oggi Ã¨ in ripresa grazie a tutele e cittÃ  â€˜accoglientiâ€™.",
  facts:[">300 km/h","Vista finissima","Nidi urbani","Becco con dente","Membrana nittitante"]},

  {name:"Corvo comune",scientificName:"Corvus corone",class:"Uccelli",emoji:"ðŸ¦",habitat:"Campagne, cittÃ  e boschi aperti in Europa e Asia",diet:"Onnivoro opportunista",lifespan:"10â€“15 anni",size:"45â€“50 cm; apertura alare ~1 m",conservation:"Least Concern",
  description:"Curioso e flessibile: usa attrezzi, impara osservando e ricorda a lungo. Abito nero, cervello sociale.",
  sociality:"Coppie stabili in riproduzione, dormitori e â€˜bandeâ€™ di giovani nel resto dellâ€™anno.",
  feeding:"Insetti, semi, frutti, carogne e scarti: pulitore e opportunista.",
  reproduction:"Nido robusto e cuccioli â€˜a lezioneâ€™ con gli adulti.",
  interactions:"Spesso regista del mobbing contro rapaci; in cambio evita predazione.",
  human:"Conosce i nostri orari e sfrutta cittÃ  e campagna.",
  facts:["Usa attrezzi","Memoria lunga","Adattabile","Vocabolario ricco","Dispense nascoste"]},

  {name:"Pinguino imperatore",scientificName:"Aptenodytes forsteri",class:"Uccelli",emoji:"ðŸ§",habitat:"Antartide: piattaforme di ghiaccio e acque gelide",diet:"Pesci, krill, calamari",lifespan:"15â€“20 anni",size:"Fino a 120 cm; 20â€“40 kg",conservation:"Near Threatened",
  description:"Vive dove lâ€™inverno Ã¨ la norma. Piume fittissime e strato di grasso; in acqua Ã¨ un sub profondo che sfrutta riserve di ossigeno e bolle.",
  sociality:"Huddle cooperativo nelle tempeste; imprinting vocale unico per riconoscersi.",
  feeding:"Immersioni fino a centinaia di metri su pesci e krill.",
  reproduction:"Un uovo: staffetta estrema tra maschio e femmina; i giovani imparano scivolando e tuffandosi.",
  interactions:"Predatori marini (foca leopardo, orche) e skua a terra.",
  human:"Specie sentinella del clima; colonie individuate persino dal guano satellitare.",
  facts:["Colonie enormi","Uovo sui piedi","Immersioni profonde","Huddle","Firme vocali"]},

  {name:"Gallina domestica",scientificName:"Gallus gallus domesticus",class:"Uccelli",emoji:"ðŸ”",habitat:"Aree rurali e urbane di tutto il mondo",diet:"Onnivora (semi, insetti, erbe)",lifespan:"5â€“10 anni",size:"Variabile",conservation:"â€”",
  description:"Razzola e setaccia: trasforma il cortile in opportunitÃ . Linguaggio ricco di richiami specifici.",
  sociality:"Gerarchie semplici, cure materne notevoli, galli sentinella.",
  feeding:"Dieta varia, grit e conchiglia per gusci forti; spazio e luce per benessere.",
  reproduction:"21 giorni di cova; pulcini precoci apprendono dal gruppo.",
  interactions:"Alleata in orto, attenzione ai predatori.",
  human:"Interesse crescente per allevamenti rispettosi della specie.",
  facts:["21 giorni","Ordine di beccata","Richiami vari","Alleata dellâ€™orto","Molte razze"]},

  {name:"Coccodrillo del Nilo",scientificName:"Crocodylus niloticus",class:"Rettili",emoji:"ðŸŠ",habitat:"Fiumi, laghi e paludi dellâ€™Africa",diet:"Carnivoro",lifespan:"40+ anni",size:">5 m",conservation:"Least Concern",
  description:"Corazza e pazienza. Occhi e narici in alto come un periscopio. Termoregola alternando sole e acqua.",
  sociality:"Condivisione di posatoi soleggiati; giovani in â€˜nurseryâ€™.",
  feeding:"Afferra, trascina, â€˜death rollâ€™ per strappare; lunghi digiuni possibili.",
  reproduction:"Nido nella sabbia; femmina aiuta schiusa e trasporta i piccoli.",
  interactions:"Predatore apicale che seleziona prede deboli e mantiene lâ€™equilibrio.",
  human:"Conflitti su rive affollate; piani locali e cartelli riducono i rischi.",
  facts:["Morsi forti","Cure parentali","Death roll","Periscopio","Termoregolazione"]},

  {name:"Aquila reale",scientificName:"Aquila chrysaetos",class:"Uccelli",emoji:"ðŸ¦…",habitat:"Montagne e scogliere dell'emisfero nord",diet:"Carnivoro",lifespan:"20â€“30 anni",size:"Apertura fino a 2,3 m",conservation:"Least Concern",
  description:"Ali scure, nuca dorata, sguardo da cecchino. Sfrutta correnti per restare in aria a lungo.",
  sociality:"Coppie territoriali con nidi monumentali riutilizzati.",
  feeding:"Lepre, marmotta, carcasse in inverno; attacco potente e preciso.",
  reproduction:"1â€“3 uova; spesso il primo ha la meglio. Giovani apprendisti di planate lunghe.",
  interactions:"Conflitti e mobbing con corvidi e altre aquile.",
  human:"Sensibile ai disturbi e alle linee; mappatura dei siti protegge la specie.",
  facts:["Supervista","Nidi enormi","Artigli forti","Territori vasti","Necrofagia"]},

  {name:"Salamandra pezzata",scientificName:"Salamandra salamandra",class:"Anfibi",emoji:"ðŸ¦Ž",habitat:"Boschi umidi europei",diet:"Insettivora",lifespan:"Fino a 20 anni",size:"15â€“25 cm",conservation:"Varia",
  description:"Nero-giallo aposematico: â€˜non toccarmiâ€™. Pelle sensibile che respira: ama ombra e umiditÃ .",
  sociality:"Solitaria ma fedele ai boschi integri; rifugi condivisi nel tempo.",
  feeding:"Preda a corto raggio: lombrichi, larve, artropodi.",
  reproduction:"Larve in acque fredde e pulite; metamorfosi legata alle piogge.",
  interactions:"Indicatrice di habitat sani; secrezioni irritanti dissuadono i predatori.",
  human:"Minacce: inquinamento, frammentazione, malattie fungine.",
  facts:["Aposematismo","Pelle delicata","Attiva dopo pioggia","Larve in acqua","Specie sentinella"]},

  {name:"Camaleonte comune",scientificName:"Chamaeleo chamaeleon",class:"Rettili",emoji:"ðŸ¦Ž",habitat:"Macchia mediterranea",diet:"Insettivoro",lifespan:"4â€“7 anni",size:"20â€“35 cm",conservation:"Locale",
  description:"Pinze alle dita, coda prensile, occhi indipendenti. Colore come linguaggio e termoregolazione.",
  sociality:"Territoriale; incontri brevi e teatralitÃ  difensiva.",
  feeding:"Lingua-proiettile su insetti, movimenti a dondolo sincronizzati col vento.",
  reproduction:"Uova in terreno soffice; piccoli giÃ  arrampicatori.",
  interactions:"Rapaci e serpenti i principali predatori; mimetismo come scudo.",
  human:"Perdita di habitat costiero e strade; corridoi ecologici aiutano.",
  facts:["Lingua proiettile","Occhi indipendenti","Coda prensile","Mimetismo","Dondolio"]},

  {name:"Gatto domestico",scientificName:"Felis catus",class:"Mammiferi",emoji:"ðŸ±",habitat:"Case, fattorie e cittÃ ",diet:"Carnivoro facoltativo",lifespan:"12â€“18 anni",size:"3â€“6 kg",conservation:"â€”",
  description:"Atleta silenzioso: pupille per il crepuscolo, baffi come sensori, orecchie da ultrasuoni. Predatore in miniatura anche in casa.",
  sociality:"Da solitario a comunitario secondo risorse; comunicazione fatta di fusa, miagolii, posture e odori.",
  feeding:"Proteine animali, pasti piccoli, gioco quotidiano come â€˜cacciaâ€™ mentale.",
  reproduction:"Senza sterilizzazione molte cucciolate; finestra dâ€™oro di socializzazione precoce.",
  interactions:"Allâ€™aperto Ã¨ efficiente predatore; in casa riduce stress ma chiede routine.",
  human:"Vaccini, tiragraffi, luoghi in alto: benessere condiviso.",
  facts:["Visione crepuscolare","Baffi sensori","Cacciatore naturale","Gioco quotidiano","Routine"]},

  {name:"Lupo grigio",scientificName:"Canis lupus",class:"Mammiferi",emoji:"ðŸº",habitat:"Foreste, tundre e montagne",diet:"Carnivoro (ungulati, piccoli vertebrati)",lifespan:"6â€“8 anni in natura",size:"25â€“45 kg",conservation:"LC variabile",
  description:"Energia cooperativa: la muta caccia e cresce i cuccioli come un villaggio. Fiuto finissimo e resistenza.",
  sociality:"Coppia riproduttiva, aiutanti, giovani; ululati tengono il contatto.",
  feeding:"Seleziona individui deboli; opportunista su carcasse e piccoli mammiferi.",
  reproduction:"Una cucciolata/anno; babysitting condiviso.",
  interactions:"Regola gli ungulati e rimescola il bosco.",
  human:"Convivere con guardiania e recinzioni elettrificate.",
  facts:["Ululato","Caccia cooperativa","Specie ombrello","Regola ungulati"]},

  {name:"Elefante africano della savana",scientificName:"Loxodonta africana",class:"Mammiferi",emoji:"ðŸ˜",habitat:"Savana e boscaglie africane",diet:"Erbivoro",lifespan:"60â€“70 anni",size:"2.7â€“6.3 t",conservation:"Endangered (alcune aree)",
  description:"Giardiniere gigante: apre radure, disperde semi, scava pozze. Proboscide versatile.",
  sociality:"Gruppi matriarcali con memoria ecologica; maschi piÃ¹ solitari.",
  feeding:"Fino a 150 kg di vegetali/dÃ¬, selezione fine di rami e cortecce.",
  reproduction:"~22 mesi di gestazione; piccoli al centro del gruppo.",
  interactions:"Modella profondamente lâ€™habitat.",
  human:"Corridoi ecologici e barriere di api riducono conflitti.",
  facts:["Proboscide","Memoria","Ingegnere ecosistema"]},

  {name:"Polpo comune",scientificName:"Octopus vulgaris",class:"Invertebrati",emoji:"ðŸ™",habitat:"Fondali rocciosi, praterie di Posidonia",diet:"CrostaÂ­cei, molluschi, piccoli pesci",lifespan:"1â€“2 anni",size:"Fino a 3â€“4 kg",conservation:"â€”",
  description:"Otto braccia, tre cuori, cervello distribuito. Mimetismo istantaneo e â€˜fuga artisticaâ€™.",
  sociality:"Per lo piÃ¹ solitario; tollera vicini se câ€™Ã¨ cibo.",
  feeding:"Becco fora conchiglie; usa sassi per chiudere la tana.",
  reproduction:"La femmina ventila le uova e poi muore.",
  interactions:"Predato da cernie e delfini; inchiostro come scudo.",
  human:"Specie importante per la pesca; attenzione etica in allevamento.",
  facts:["Mimetismo","Intelligenza diffusa","Tre cuori","Becco"]},

  {name:"Squalo bianco",scientificName:"Carcharodon carcharias",class:"Pesci",emoji:"ðŸ¦ˆ",habitat:"Oceani temperati",diet:"Pesci e pinnipedi",lifespan:"30â€“40+ anni",size:"Fino a 6 m",conservation:"Vulnerable",
  description:"Atleta oceanico con sensori elettrici (ampolle di Lorenzini). Alterna pattuglie lente a scatti dal basso.",
  sociality:"Per lo piÃ¹ solitario; gerarchie flessibili su aree ricche di cibo.",
  feeding:"Attacco a sorpresa; dopo il primo morso valuta.",
  reproduction:"Viviparo aplacentare (oofagia).",
  interactions:"Predatore apicale che stabilizza le reti marine.",
  human:"Impatti: pesca e declino prede; rischio umano raro.",
  facts:["Sensori elettrici","Apicale","Oofagia","Attacco dal basso"]},

  {name:"Tartaruga caretta",scientificName:"Caretta caretta",class:"Rettili",emoji:"ðŸ¢",habitat:"Mare aperto e spiagge sabbiose",diet:"Meduse, crostacei, molluschi",lifespan:"50+ anni",size:"70â€“120 cm carapace",conservation:"Vulnerable",
  description:"Viaggiatrice con bussola magnetica; depone spesso sulle spiagge di nascita.",
  sociality:"Solitaria; spiagge affollate solo per la deposizione.",
  feeding:"Becco e placche trattengono meduse scivolose.",
  reproduction:"Molte uova; piccoli vulnerabili alle luci artificiali.",
  interactions:"Predatori su uova e piccoli; rete trofica con meduse.",
  human:"Ganci circolari e â€˜spiagge buieâ€™ riducono la mortalitÃ .",
  facts:["Navigazione magnetica","Filopatria","Becco per meduse"]},

  {name:"Raganella italiana",scientificName:"Hyla intermedia",class:"Anfibi",emoji:"ðŸ¸",habitat:"Zone umide e siepi",diet:"Insettivora",lifespan:"4â€“8 anni",size:"3â€“5 cm",conservation:"Least Concern",
  description:"Verde lucida con ventose; coro crepuscolare potentissimo per la taglia.",
  sociality:"Cori competitivi dei maschi; scelta femminile sul ritmo.",
  feeding:"Zanzare e piccoli insetti a corto raggio.",
  reproduction:"Uova tra vegetazione acquatica; metamorfosi rapida.",
  interactions:"Predata da serpi dâ€™acqua e aironi.",
  human:"Soffre la scomparsa delle zone umide; stagni urbani aiutano.",
  facts:["Ventosette","Canto forte","Controllo zanzare"]},

  {name:"Volpe rossa",scientificName:"Vulpes vulpes",class:"Mammiferi",emoji:"ðŸ¦Š",habitat:"Campagne e cittÃ ",diet:"Roditori, insetti, frutta",lifespan:"3â€“5 anni in natura",size:"5â€“8 kg",conservation:"Least Concern",
  description:"Agile e curiosa, sfrutta ogni nicchia: dal grano al marciapiede.",
  sociality:"Coppie riproduttive; giovani talvolta aiutanti.",
  feeding:"Ascolto finissimo per cacciare topi; integra con frutta.",
  reproduction:"Tana con piÃ¹ ingressi; cuccioli apprendono giocando.",
  interactions:"Controlla roditori; disperde semi.",
  human:"Convivenza: bidoni chiusi, niente cibo fuori.",
  facts:["Salto sulla neve","Ascolto fine","Generalista"]},

  {name:"Ape mellifera",scientificName:"Apis mellifera",class:"Invertebrati",emoji:"ðŸ",habitat:"Prati fioriti, boschi, cittÃ ",diet:"Nettare e polline",lifespan:"Operaia 5â€“6 sett.; regina 3â€“5 anni",size:"12â€“15 mm",conservation:"â€”",
  description:"Colonia come super-organismo; danza indica direzione e distanza delle risorse.",
  sociality:"Caste e divisione del lavoro per etÃ .",
  feeding:"Nettareâ†’miele; polline come proteina.",
  reproduction:"Sciamatura: â€˜riproduzioneâ€™ della colonia.",
  interactions:"Impollinatrice chiave.",
  human:"Corridoi fioriti e meno pesticidi sistemici.",
  facts:["Danza","Impollinazione","Super-organismo"]},

  {name:"Mantide religiosa",scientificName:"Mantis religiosa",class:"Invertebrati",emoji:"ðŸ¦—",habitat:"Prati, margini di campi e giardini",diet:"Predatrice di insetti",lifespan:"1 anno",size:"5â€“7 cm (â™€)",conservation:"â€”",
  description:"Statua verde che diventa trappola: zampe raptatorie e testa mobile.",
  sociality:"Solitario; incontri per accoppiamento.",
  feeding:"Aspetta e fulmina mosche, cavallette, farfalle.",
  reproduction:"Ooteca spumosa da cui emergono molte ninfe.",
  interactions:"Controllo naturale dei fitofagi.",
  human:"Evitare insetticidi generici.",
  facts:["Zampe raptatorie","Testa mobile","Ooteca"]},

  {name:"Farfalla monarca",scientificName:"Danaus plexippus",class:"Invertebrati",emoji:"ðŸ¦‹",habitat:"Praterie e campi (migrazione)",diet:"Nettare; bruchi su Asclepias",lifespan:"6â€“8 settimane; 8 mesi la migratrice",size:"8â€“10 cm",conservation:"Near Threatened",
  description:"Arancione/nera aposematica; migrazione continentale. Larve tossiche grazie allâ€™Asclepias.",
  sociality:"Dormitori immensi durante la migrazione.",
  feeding:"Adulti su molti fiori; bruchi specialisti.",
  reproduction:"Ciclo in staffetta tra generazioni.",
  interactions:"Predatori evitano i colori di avviso.",
  human:"Ripristino di Asclepias e meno erbicidi.",
  facts:["Migrazione","Colori di avviso","Larve tossiche"]},

  /* â€”â€”â€”â€”â€” 50 SPECIE AGGIUNTE â€”â€”â€”â€”â€” */
  {name:"Leone",scientificName:"Panthera leo",class:"Mammiferi",emoji:"ðŸ¦",habitat:"Savana africana",diet:"Carnivoro (ungulati)",description:"Predatore sociale: il branco coordina agguati e difesa del territorio. Maschi con criniera, femmine cacciatrici efficienti."},
  {name:"Tigre",scientificName:"Panthera tigris",class:"Mammiferi",emoji:"ðŸ¯",habitat:"Foreste e paludi asiatiche",diet:"Carnivoro",description:"Cacciatore solitario, potente e furtivo. Striature come mimetismo nellâ€™ombra della foresta."},
  {name:"Leopardo",scientificName:"Panthera pardus",class:"Mammiferi",emoji:"ðŸ†",habitat:"Foreste e savane africane/asiatiche",diet:"Carnivoro",description:"Generalista supremo: arrampica e trascina la preda sugli alberi per metterla al sicuro."},
  {name:"Ghepardo",scientificName:"Acinonyx jubatus",class:"Mammiferi",emoji:"ðŸ†",habitat:"Savana",diet:"Carnivoro (gazzelle)",description:"Il piÃ¹ veloce a terra: sprint brevi e curve controllate dalla lunga coda."},
  {name:"Iena maculata",scientificName:"Crocuta crocuta",class:"Mammiferi",emoji:"ðŸ¦¬",habitat:"Savana africana",diet:"Carnivoro/necrofago",description:"Clan cooperativi, mandibole fortissime; non solo spazzina: eccellente cacciatrice."},
  {name:"Orso bruno",scientificName:"Ursus arctos",class:"Mammiferi",emoji:"ðŸ»",habitat:"Foreste e montagne eurasiatiche",diet:"Onnivoro",description:"Grande generalista: bacche, insetti, pesci. Ibernazione come strategia energetica."},
  {name:"Orso polare",scientificName:"Ursus maritimus",class:"Mammiferi",emoji:"ðŸ»â€â„ï¸",habitat:"Ghiacci artici",diet:"Carnivoro (foche)",description:"Nuotatore instancabile; caccia alle tane e ai buchi di respirazione sul pack."},
  {name:"Panda gigante",scientificName:"Ailuropoda melanoleuca",class:"Mammiferi",emoji:"ðŸ¼",habitat:"Foreste di bambÃ¹ cinesi",diet:"Erbivoro (bambÃ¹)",description:"Carnivoro â€˜convertitoâ€™: pollice falso per afferrare culmi; dieta povera, tante ore a mangiare."},
  {name:"Panda rosso",scientificName:"Ailurus fulgens",class:"Mammiferi",emoji:"ðŸ¦Š",habitat:"Foreste himalayane",diet:"BambÃ¹, frutta, insetti",description:"Arboreo e crepuscolare, coda folta come sciarpa termica."},
  {name:"Koala",scientificName:"Phascolarctos cinereus",class:"Mammiferi",emoji:"ðŸ¨",habitat:"Foreste di eucalipto australiane",diet:"Foglie di eucalipto",description:"Dormiglione professionista: dieta povera, fegato specializzato per tossine dellâ€™eucalipto."},
  {name:"Canguro rosso",scientificName:"Osphranter rufus",class:"Mammiferi",emoji:"ðŸ¦˜",habitat:"Zone aride australiane",diet:"Erbivoro",description:"Saltatore con coda-bilanciere; risparmio idrico e attivitÃ  crepuscolare."},
  {name:"Lince eurasiatica",scientificName:"Lynx lynx",class:"Mammiferi",emoji:"ðŸ±",habitat:"Foreste boreali e alpine",diet:"Carnivoro (caprioli, lepri)",description:"Cacciatore furtivo, orecchie con pennacchi come antenne direzionali."},
  {name:"Lontra europea",scientificName:"Lutra lutra",class:"Mammiferi",emoji:"ðŸ¦¦",habitat:"Fiumi e laghi puliti",diet:"Pesci e crostacei",description:"Nuotatrice agile con pelliccia ultra-isolante; indicatrice di acque sane."},
  {name:"Delfino tursiope",scientificName:"Tursiops truncatus",class:"Mammiferi",emoji:"ðŸ¬",habitat:"Coste temperate e tropicali",diet:"Pesci",description:"Intelligente e sociale; caccia cooperativa con bolle e cerchiamento."},
  {name:"Orca",scientificName:"Orcinus orca",class:"Mammiferi",emoji:"ðŸ‹",habitat:"Tutti gli oceani",diet:"Pesci o mammiferi marini",description:"Cultura di popolazione: dialetti e tecniche di caccia ereditate."},
  {name:"Balena azzurra",scientificName:"Balaenoptera musculus",class:"Mammiferi",emoji:"ðŸ‹",habitat:"Oceani aperti",diet:"Krill",description:"Il piÃ¹ grande animale mai esistito; filtra milioni di piccoli crostacei."},
  {name:"Megattera",scientificName:"Megaptera novaeangliae",class:"Mammiferi",emoji:"ðŸ³",habitat:"Oceani",diet:"Krill e piccoli pesci",description:"Canti complessi; caccia â€˜a rete di bolleâ€™ cooperativa."},
  {name:"Cavalluccio marino",scientificName:"Hippocampus hippocampus",class:"Pesci",emoji:"ðŸŸ",habitat:"Praterie di Posidonia",diet:"Crostataci minuscoli",description:"Maschio â€˜incintoâ€™ nella sacca; nuotatore verticale, mimetismo con alghe."},
  {name:"Pesce pagliaccio",scientificName:"Amphiprion ocellaris",class:"Pesci",emoji:"ðŸ ",habitat:"Barriere coralline",diet:"Onnivoro",description:"Vive tra i tentacoli dellâ€™anemone, immunizzato dal muco protettivo."},
  {name:"Tonno pinna gialla",scientificName:"Thunnus albacares",class:"Pesci",emoji:"ðŸŸ",habitat:"Oceani tropicali",diet:"Pesci e cefalopodi",description:"Nuotatore pelagico velocissimo, termoregolazione parziale."},
  {name:"Manta gigante",scientificName:"Mobula birostris",class:"Pesci",emoji:"ðŸ›¸",habitat:"Oceani tropicali",diet:"Plancton",description:"Filtratore elegante; salti fuori dallâ€™acqua forse comunicativi."},
  {name:"Calamaro gigante",scientificName:"Architeuthis dux",class:"Invertebrati",emoji:"ðŸ¦‘",habitat:"ProfonditÃ  oceaniche",diet:"Pesci e cefalopodi",description:"Gigante elusivo degli abissi; occhi enormi per la penombra."},
  {name:"Medusa aurelia",scientificName:"Aurelia aurita",class:"Invertebrati",emoji:"ðŸŒŠ",habitat:"Mare temperato",diet:"Plancton",description:"Ombrelli pulsanti; ciclo vitale con fase polipo e medusa."},
  {name:"Corallo cervello",scientificName:"Diploria labyrinthiformis",class:"Invertebrati",emoji:"ðŸ§ ",habitat:"Barriere coralline",diet:"Zooxantelle + plancton",description:"Colonia di polipi che costruisce scheletro calcareo: architetto dei reef."},
  {name:"Barbagianni",scientificName:"Tyto alba",class:"Uccelli",emoji:"ðŸ¦‰",habitat:"Campagne, cascine, cittÃ ",diet:"Roditori",description:"Volo silenzioso e disco facciale che canalizza i suoni: predatore notturno di precisione."},
  {name:"Gufo delle nevi",scientificName:"Bubo scandiacus",class:"Uccelli",emoji:"ðŸ¦‰",habitat:"Tundra artica",diet:"Lemmini e uccelli",description:"Piumaggio bianco isolante; caccia anche di giorno nelle estati polari."},
  {name:"Martin pescatore",scientificName:"Alcedo atthis",class:"Uccelli",emoji:"ðŸŸ",habitat:"Fiumi puliti",diet:"Pesciolini",description:"Freccia turchese; tuffo verticale e nido in galleria sabbiosa."},
  {name:"Fenicottero rosa",scientificName:"Phoenicopterus roseus",class:"Uccelli",emoji:"ðŸ¦©",habitat:"Lagune salmastre",diet:"Alghe e crostacei",description:"Becco-filtratore; il rosa deriva dai carotenoidi della dieta."},
  {name:"Airone cenerino",scientificName:"Ardea cinerea",class:"Uccelli",emoji:"ðŸª",habitat:"Zone umide",diet:"Pesci, anfibi",description:"Cacciatore paziente: statue improvvise e colpi di becco fulminei."},
  {name:"Cicogna bianca",scientificName:"Ciconia ciconia",class:"Uccelli",emoji:"ðŸ•Šï¸",habitat:"Zone agricole e umide",diet:"Insetti, anfibi",description:"Nidi monumentali su tralicci e tetti; migrazioni su correnti termiche."},
  {name:"Pavone blu",scientificName:"Pavo cristatus",class:"Uccelli",emoji:"ðŸ¦š",habitat:"Foreste e parchi",diet:"Onnivoro",description:"Coda a â€˜ruotaâ€™ per mostra nuziale; ocelli come segnali visivi."},
  {name:"ColibrÃ¬",scientificName:"Trochilidae spp.",class:"Uccelli",emoji:"ðŸª½",habitat:"Americhe",diet:"Nettare e insetti",description:"Volo stazionario con ali a 50â€“80 battiti/s; memoria dei fiori."},
  {name:"Albatros urlatore",scientificName:"Diomedea exulans",class:"Uccelli",emoji:"ðŸ•Šï¸",habitat:"Oceani australi",diet:"Pesci e calamari",description:"Apertura alare record; veleggia giorni sfruttando i venti oceanici."},
  {name:"Struzzo",scientificName:"Struthio camelus",class:"Uccelli",emoji:"ðŸª¶",habitat:"Savana e semi-deserti",diet:"Onnivoro",description:"Uccello piÃ¹ grande e corridore velocissimo; uova enormi."},
  {name:"Drago di Komodo",scientificName:"Varanus komodoensis",class:"Rettili",emoji:"ðŸ¦Ž",habitat:"Isole indonesiane",diet:"Carnivoro",description:"Grande varano con morso capace di lacerazioni severe; attacchi dâ€™agguato."},
  {name:"Iguana verde",scientificName:"Iguana iguana",class:"Rettili",emoji:"ðŸ¦Ž",habitat:"Foreste tropicali",diet:"Erbivora",description:"Arborea, ottima nuotatrice; cresta dorsale termoregolatrice."},
  {name:"Boa constrictor",scientificName:"Boa constrictor",class:"Rettili",emoji:"ðŸ",habitat:"Neotropici",diet:"Mammiferi e uccelli",description:"Uccide per costrizione; caccia dâ€™agguato notturna."},
  {name:"Cobra reale",scientificName:"Ophiophagus hannah",class:"Rettili",emoji:"ðŸ",habitat:"Foreste asiatiche",diet:"Serpenti",description:"Il piÃ¹ lungo serpente velenoso; nido costruito con foglie, raro tra i serpenti."},
  {name:"Testuggine di terra",scientificName:"Testudo hermanni",class:"Rettili",emoji:"ðŸ¢",habitat:"Macchia mediterranea",diet:"Erbivora",description:"Lenta ma longeva; scuti cornei come armatura contro predatori."},
  {name:"Geco tokay",scientificName:"Gekko gecko",class:"Rettili",emoji:"ðŸ¦Ž",habitat:"Case e foreste tropicali",diet:"Insetti",description:"Piedi adesivi con micro-setole; richiamo notturno potente â€˜to-kayâ€™."},
  {name:"Axolotl",scientificName:"Ambystoma mexicanum",class:"Anfibi",emoji:"ðŸ§œâ€â™‚ï¸",habitat:"Lagune messicane",diet:"Invertebrati e piccoli pesci",description:"Mantiene caratteristiche larvali da adulto (neotenia); grande capacitÃ  rigenerativa."},
  {name:"Rospo comune",scientificName:"Bufo bufo",class:"Anfibi",emoji:"ðŸ¸",habitat:"Boschi e giardini umidi",diet:"Insettivoro",description:"Pelle verrucosa e ghiandole parotoidi; migrazioni primaverili verso gli stagni."},
  {name:"Rana freccia velenosa",scientificName:"Dendrobatidae spp.",class:"Anfibi",emoji:"ðŸ¸",habitat:"Foreste tropicali",diet:"Insetti",description:"Piccole, coloratissime e tossiche; cura parentale su foglie e bromeliacee."},
  {name:"Coccinella",scientificName:"Coccinella septempunctata",class:"Invertebrati",emoji:"ðŸž",habitat:"Prati e campi",diet:"Aphidi (afidi)",description:"Predatrice utile in agricoltura; colori di avviso contro i predatori."},
  {name:"Libellula",scientificName:"Anisoptera spp.",class:"Invertebrati",emoji:"ðŸª°",habitat:"Zone umide",diet:"Insetti volanti",description:"Volatrici abilissime; ninfe acquatiche predatrici."},
  {name:"Lucciola",scientificName:"Lampyridae spp.",class:"Invertebrati",emoji:"âœ¨",habitat:"Prati e boschi umidi",diet:"Larve carnivore",description:"Bioluminescenza per comunicazione e difesa; sensibilissima allâ€™inquinamento luminoso."},
  {name:"Cervo volante",scientificName:"Lucanus cervus",class:"Invertebrati",emoji:"ðŸª²",habitat:"Boschi maturi",diet:"Larve nel legno morto",description:"Maschi con mandibole â€˜a cornaâ€™; specie legata ai vecchi alberi."},
  {name:"Formica rossa",scientificName:"Formica rufa",class:"Invertebrati",emoji:"ðŸœ",habitat:"Boschi di conifere",diet:"Onnivora",description:"Formicai a cupola; gestione del bosco con dispersione di semi e predazione di insetti."},
  {name:"Termite",scientificName:"Isoptera spp.",class:"Invertebrati",emoji:"ðŸ•³ï¸",habitat:"Tropici e subtropici",diet:"Cellulosa",description:"Architetti sociali: nidi ventilati e simbiosi con microrganismi per digerire il legno."},
  {name:"Zanzara tigre",scientificName:"Aedes albopictus",class:"Invertebrati",emoji:"ðŸ¦Ÿ",habitat:"Aree urbane e suburbane",diet:"Nettare; femmine sangue",description:"Specie invasiva; piccoli ristagni dâ€™acqua bastano per lo sviluppo delle larve."},
  {name:"Farfalla macaone",scientificName:"Papilio machaon",class:"Invertebrati",emoji:"ðŸ¦‹",habitat:"Prati e orti",diet:"Nettare; bruchi su finocchio e carota",description:"Grande e vistosa; bruchi con osmeterio odoroso per difesa."},
  {name:"Falena luna",scientificName:"Actias luna",class:"Invertebrati",emoji:"ðŸ¦‹",habitat:"Foreste nordamericane",diet:"Nettare assente; adulti non si alimentano",description:"Ali verdi con code filamentose che confondono i pipistrelli."},
  {name:"Tarantola",scientificName:"Theraphosidae spp.",class:"Invertebrati",emoji:"ðŸ•·ï¸",habitat:"Tropici e zone aride",diet:"Insetti e piccoli vertebrati",description:"Pelosa e robusta; peli urticanti come difesa."},
  {name:"Scorpione imperatore",scientificName:"Pandinus imperator",class:"Invertebrati",emoji:"ðŸ¦‚",habitat:"Foreste africane",diet:"Insetti",description:"Grande ma con veleno moderato; pinze poderose per catturare."},
  {name:"Lombrico",scientificName:"Lumbricus terrestris",class:"Invertebrati",emoji:"ðŸª±",habitat:"Suoli umidi",diet:"Detrito",description:"Ingegnere del suolo: mescola, aerando e migliorando la fertilitÃ ."},
  {name:"Chiocciola",scientificName:"Helix pomatia",class:"Invertebrati",emoji:"ðŸŒ",habitat:"Prati e boschi umidi",diet:"Erbivora",description:"Guscio calcareo protettivo; attiva con umiditÃ  e dopo la pioggia."},
  {name:"Lumaca",scientificName:"Arion spp.",class:"Invertebrati",emoji:"ðŸŒ",habitat:"Orti e prati",diet:"Erbivora",description:"Senza guscio; muco come protezione e locomozione."},
  {name:"Stella marina comune",scientificName:"Asterias rubens",class:"Invertebrati",emoji:"â­",habitat:"Fondali rocciosi atlantici",diet:"Molluschi bivalvi",description:"Stomaco eversibile per digerire fuori dal corpo; rigenera braccia."},
  {name:"Riccio di mare",scientificName:"Paracentrotus lividus",class:"Invertebrati",emoji:"ðŸ¦”",habitat:"Praterie di Posidonia e scogli",diet:"Alghe",description:"Spine mobili; importante per lâ€™equilibrio delle alghe sul fondo."},
  {name:"Seppia comune",scientificName:"Sepia officinalis",class:"Invertebrati",emoji:"ðŸ¦‘",habitat:"Fondali sabbiosi e praterie marine",diet:"Crostacei e pesci",description:"Mimetismo dinamico con cromatofori; osso di seppia per assetto e sostegno."}
];


/* ==========================
   UTIL & STATO
   ========================== */
const slug = s => s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");
ANIMALS.forEach(a=>{ a.id = slug(a.name); a._hay = [a.name,a.scientificName,a.habitat,a.diet,a.class,(a.facts||[]).join(" ")].join(" ").toLowerCase(); });
const by = key => (a,b)=> (a[key]||"").localeCompare(b[key]||"");
const qs = sel => document.querySelector(sel);
const state = { q:"", cls:"", route:"/home" };

/* ==========================
   HABITAT â†’ classi & tema
   ========================== */
const habClass = (hab='')=>{
  const h = hab.toLowerCase();
  if(h.includes('foreste')||h.includes('foresta')) return 'hab-foresta';
  if(h.includes('savana')||h.includes('prateria')) return 'hab-savana';
  if(h.includes('antart')||h.includes('ghiaccio')||h.includes('polo')) return 'hab-ghiaccio';
  if(h.includes('mare')||h.includes('oceano')||h.includes('coste')||h.includes('acque')) return 'hab-oceano';
  if(h.includes('montagne')||h.includes('scogliere')||h.includes('alp')) return 'hab-montagna';
  if(h.includes('deserto')||h.includes('arido')) return 'hab-deserto';
  if(h.includes('prateria')||h.includes('steppe')) return 'hab-prateria';
  return 'hab-prateria';
};
const toTheme = (hc)=>({
  'hab-foresta':'theme-foresta','hab-savana':'theme-savana','hab-ghiaccio':'theme-ghiaccio',
  'hab-oceano':'theme-oceano','hab-montagna':'theme-montagna','hab-deserto':'theme-deserto','hab-prateria':'theme-prateria'
}[hc]||'theme-prateria');
const THEMES = ['theme-foresta','theme-savana','theme-oceano','theme-montagna','theme-ghiaccio','theme-deserto','theme-prateria'];

/* ==========================
   SFONDI
   ========================== */
function pickThemeVars(theme){
  const tweak = (hex, delta=0) => {
    const c = hex.replace('#','');
    const r = parseInt(c.slice(0,2),16), g = parseInt(c.slice(2,4),16), b = parseInt(c.slice(4,6),16);
    const rn=r/255, gn=g/255, bn=b/255; const max=Math.max(rn,gn,bn), min=Math.min(rn,gn,bn);
    let h,s,l=(max+min)/2, d=max-min; if(d===0){ h=0; s=0; } else { s=d/(1-Math.abs(2*l-1)); switch(max){case rn:h=((gn-bn)/d)%6;break;case gn:h=(bn-rn)/d+2;break;default:h=(rn-gn)/d+4;} h*=60; if(h<0)h+=360; }
    l=Math.min(1,Math.max(0,l+delta)); const C=(1-Math.abs(2*l-1))*s, X=C*(1-Math.abs(((h/60)%2)-1)), m=l-C/2; let rr,gg,bb;
    if(0<=h&&h<60){rr=C;gg=X;bb=0;} else if(60<=h&&h<120){rr=X;gg=C;bb=0;} else if(120<=h&&h<180){rr=0;gg=C;bb=X;} else if(180<=h&&h<240){rr=0;gg=X;bb=C;} else if(240<=h&&h<300){rr=X;gg=0;bb=C;} else {rr=C;gg=0;bb=X;}
    const R=Math.round((rr+m)*255), G=Math.round((gg+m)*255), B=Math.round((bb+m)*255);
    return `#${R.toString(16).padStart(2,'0')}${G.toString(16).padStart(2,'0')}${B.toString(16).padStart(2,'0')}`;
  };
  const sets = {
    "theme-foresta": { base0:"#f0fdf4", base1:"#dcfce7" },
    "theme-savana":  { base0:"#fffbeb", base1:"#fef9c3" },
    "theme-oceano":  { base0:"#f0f9ff", base1:"#e0f2fe" },
    "theme-montagna":{ base0:"#f8fafc", base1:"#e2e8f0" },
    "theme-ghiaccio":{ base0:"#f8fafc", base1:"#e0f2fe" },
    "theme-deserto": { base0:"#fff7ed", base1:"#ffedd5" },
    "theme-prateria":{ base0:"#ecfeff", base1:"#d1fae5" }
  };
  const set = sets[theme] || sets["theme-prateria"];
  const wiggle = (Math.random()*0.08)-0.04;
  const t0 = tweak(set.base0, wiggle);
  const t1 = tweak(set.base1, -wiggle/2);
  return { t0, t1 };
}
function applyTheme(theme){
  document.body.classList.remove(...THEMES);
  document.body.classList.add(theme);
  const { t0, t1 } = pickThemeVars(theme);
  document.documentElement.style.setProperty('--t0', t0);
  document.documentElement.style.setProperty('--t1', t1);
}

/* ==========================
   TEMPLATE
   ========================== */
function cardTpl(a){
  const hc = habClass(a.habitat);
  return `
    <article class="card" aria-label="${a.name}">
      <div class="thumb ${hc}"><div class="emoji">${a.emoji||'ðŸ§¬'}</div></div>
      <div class="body">
        <span class="badge">${a.class}</span>
        <h3>${a.name}</h3>
        <div class="meta"><i>${a.scientificName}</i></div>
        <div class="actions"><a class="btn" href="#/animal/${a.id}">Apri scheda</a></div>
      </div>
    </article>`;
}
function listTpl(){
  const items = filteredItems();
  const cards = items.map(cardTpl).join('');
  return `<div class="grid">${cards || emptyTpl()}</div>`;
}
function quickFacts(a){
  return `
  <div class="panel pad quick">
    <h3 style="margin-top:0">Scheda rapida</h3>
    <div class="accordion-tools" style="margin-bottom:10px">
      <button class="btn btn-ghost" onclick="openAllSections()">Apri tutto</button>
      <button class="btn btn-ghost" onclick="closeAllSections()">Chiudi tutto</button>
    </div>
    <div class="kv">
      <div class="meta">Nome scientifico</div><div><i>${a.scientificName||'â€”'}</i></div>
      <div class="meta">Classe</div><div>${a.class||'â€”'}</div>
      <div class="meta">Habitat</div><div>${a.habitat||'â€”'}</div>
      <div class="meta">Dieta</div><div>${a.diet||'â€”'}</div>
      <div class="meta">Vita media</div><div>${a.lifespan||'â€”'}</div>
      <div class="meta">Dimensioni</div><div>${a.size||'â€”'}</div>
      <div class="meta">Conservazione</div><div>${a.conservation||'â€”'}</div>
    </div>
    <div style="display:flex;gap:6px;flex-wrap:wrap;margin-top:12px">
      ${(a.facts||[]).slice(0,6).map(f=>`<span class="chip">${f}</span>`).join('')}
    </div>
  </div>`;
}
function acc(id, title, html){
  return `
  <details class="acc" id="${id}">
    <summary class="acc-sum"><span class="chev">â–¶</span> ${title}</summary>
    <div class="acc-body">${html}</div>
  </details>`;
}
function detailTpl(a){
  const hc = habClass(a.habitat);
  const facts = (a.facts||[]).map(f=>`<li>${f}</li>`).join('');
  const finale = (a.facts && a.facts[0]) ? a.facts[0] : "Questo animale riserva sempre sorprese.";
  return `
  <div class="detail">
    <div>
      <div class="hero-animal panel">
        <div class="banner ${hc}"><div class="emoji">${a.emoji||'ðŸ§¬'}</div></div>
        <div class="head">
          <div style="flex:1;min-width:240px">
            <h2>${a.name}</h2>
            <div class="meta"><i>${a.scientificName}</i></div>
            <div class="toc" aria-label="vai a sezione">
              <a href="#" data-target="#desc">Descrizione</a>
              <a href="#" data-target="#soc">SocialitÃ </a>
              <a href="#" data-target="#feed">Alimentazione</a>
              <a href="#" data-target="#repr">Riproduzione</a>
              <a href="#" data-target="#eco">Ruolo ecologico</a>
              <a href="#" data-target="#hum">Rapporto con l'uomo</a>
              <a href="#" data-target="#facts">CuriositÃ </a>
            </div>
          </div>
          <div>
            <a class="btn" href="#/home">â† Torna all'elenco</a>
          </div>
        </div>
      </div>

      <div id="desc" class="panel pad section"><h3>Descrizione generale</h3><p>${a.description||'â€”'}</p></div>
      ${acc('soc', 'SocialitÃ  e comportamento', `<p>${a.sociality||'â€”'}</p>`)}
      ${acc('feed', 'Alimentazione e caccia', `<p>${a.feeding||'â€”'}</p>`)}
      ${acc('repr', 'Riproduzione e crescita', `<p>${a.reproduction||'â€”'}</p>`)}
      ${acc('eco', 'Ruolo ecologico e predatori', `<p>${a.interactions||'â€”'}</p>`)}
      ${facts? acc('facts', 'CuriositÃ ', `<ul>${facts}</ul>`) : ''}
      ${acc('hum', "Rapporto con l'uomo", `<p>${a.human||'â€”'}</p>`)}
      <div class="panel pad callout" style="margin-top:12px"><b>Lo sapevi cheâ€¦</b> ${finale}</div>
    </div>
    ${quickFacts(a)}
  </div>`;
}
function curiositaTpl(){
  const pick = arr=>arr[Math.floor(Math.random()*arr.length)];
  const facts = [];
  for(let i=0;i<6;i++){ const a = pick(ANIMALS); facts.push(`<li><b>${a.name}:</b> ${pick(a.facts||[a.description||'â€”'])}</li>`); }
  return `<div class="panel pad"><h2 style="margin-top:0">CuriositÃ  casuali âœ¨</h2><ul>${facts.join('')}</ul></div>`;
}
function contattiTpl(){ return `<div class="panel pad"><h2 style="margin-top:0">Contatti</h2><p>Progetto didattico. Apri una issue sul repository GitHub per suggerimenti o contributi.</p></div>` }
function notFoundTpl(){ return `<div class="panel pad"><h2>Ops!</h2><p>Animale non trovato.</p></div>` }
function emptyTpl(){ return `<div class="panel pad"><p>Nessun risultato. Prova a cambiare ricerca o filtro.</p></div>` }

/* ==========================
   RENDER & ROUTER
   ========================== */
function filteredItems(){
  const q = (state.q||'').trim().toLowerCase();
  return ANIMALS
    .filter(a => (!q || a._hay.includes(q)))
    .filter(a => (!state.cls || a.class===state.cls))
    .sort(by('name'));
}
function render(){
  const container = qs('#view');
  const hash = location.hash.replace('#','') || '/home';
  state.route = hash;
  if(hash.startsWith('/animal/')){
    const id = hash.split('/')[2];
    const a = ANIMALS.find(x=>x.id===id);
    if(a) applyTheme(toTheme(habClass(a.habitat)));
    container.innerHTML = a ? detailTpl(a) : notFoundTpl();
    if(a) bindTocLinks();
    return;
  }
  if(hash==='/curiosita'){ applyTheme(THEMES[Math.floor(Math.random()*THEMES.length)]); container.innerHTML = curiositaTpl(); return; }
  if(hash==='/contatti'){ applyTheme('theme-prateria'); container.innerHTML = contattiTpl(); return; }
  // Home/Elenco
  applyTheme(THEMES[Math.floor(Math.random()*THEMES.length)]);
  container.innerHTML = listTpl();
}

/* ==========================
   INTERAZIONE
   ========================== */
function showToast(msg){ const t = document.querySelector('#toast'); t.textContent = msg; t.classList.add('show'); clearTimeout(showToast._t); showToast._t = setTimeout(()=> t.classList.remove('show'), 2000); }
function goRandom(){ const items = filteredItems(); if(!items.length) return; const pick = items[Math.floor(Math.random()*items.length)]; location.hash = `#/animal/${pick.id}`; showToast(`Hai pescato: ${pick.name}! ðŸŽ²`); }
function openAllSections(){ document.querySelectorAll('#view details.acc').forEach(d=> d.open = true); }
function closeAllSections(){ document.querySelectorAll('#view details.acc').forEach(d=> d.open = false); }
function bindTocLinks(){
  document.querySelectorAll('.toc a[data-target]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      e.preventDefault();
      const sel = a.getAttribute('data-target');
      const el = document.querySelector(sel);
      if(el){ el.scrollIntoView({behavior:'smooth', block:'start'}); }
    });
  });
}
function setupControls(){
  document.querySelector('#q').addEventListener('input', e=>{ state.q = e.target.value; render(); });
  document.querySelector('#filterClass').addEventListener('change', e=>{ state.cls = e.target.value; render(); });
  const br = document.querySelector('#btnRandom'); if(br) br.addEventListener('click', goRandom);
  window.addEventListener('keydown', (e)=>{
    if(e.key && e.key.toLowerCase()==='r' && !e.metaKey && !e.ctrlKey && !e.altKey){
      const a = document.activeElement;
      if(a && (a.tagName==='INPUT' || a.tagName==='TEXTAREA' || a.isContentEditable)) return;
      e.preventDefault(); goRandom();
    }
  });
}

window.addEventListener('hashchange', render);
window.addEventListener('DOMContentLoaded', ()=>{ setupControls(); render(); });
</script>
</body>
</html>
