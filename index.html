<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Biolo-Gio | Enciclopedia degli animali</title>
<style>
:root {
  --text:#0f172a;
  --bg:#f8fafc;
  --card:#fff;
  --radius:16px;
}
*{box-sizing:border-box}
body {
  margin:0;
  font-family:system-ui, sans-serif;
  color:var(--text);
  background:#f1f5f9;
  line-height:1.6;
  transition:background 0.4s ease;
}
body.theme-foresta {
  background:linear-gradient(180deg,#dcfce7,#bbf7d0);
}
body.theme-savana {
  background:linear-gradient(180deg,#fef9c3,#fde68a);
}
body.theme-oceano {
  background:linear-gradient(180deg,#e0f2fe,#bae6fd);
}
header {
  padding:1rem 2rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#fff;
  box-shadow:0 2px 8px #0001;
}
h1 {font-size:1.6rem;margin:0;}
main{padding:2rem;max-width:1000px;margin:auto;}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1rem;
  margin-top:1.5rem;
}
.card {
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:0 2px 6px #0002;
  padding:1rem;
  text-align:center;
  cursor:pointer;
  transition:transform .2s;
}
.card:hover{transform:scale(1.03);}
.thumb{font-size:3rem}
button,select,input{
  font:inherit;
  border:1px solid #cbd5e1;
  border-radius:var(--radius);
  padding:0.5rem 1rem;
}
button{background:#bae6fd;cursor:pointer;}
button:hover{background:#a5f3fc;}
.toast {
  position:fixed;
  bottom:20px;left:50%;
  transform:translateX(-50%) translateY(40px);
  background:#0ea5e9;color:white;
  padding:10px 18px;
  border-radius:12px;
  box-shadow:0 4px 20px #0004;
  opacity:0;
  transition:opacity .4s, transform .4s;
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>
<header>
  <h1>üêæ Biolo-Gio</h1>
  <nav>
    <a href="#/home">Home</a> |
    <a href="#/curiosita">Curiosit√†</a> |
    <a href="#/contatti">Contatti</a>
  </nav>
</header>
<main>
  <h2>Enciclopedia degli animali, a misura di curiosit√†.</h2>
  <p>Scopri specie, habitat, dieta e piccole perle zoologiche. Tutto in un unico file HTML, perfetto per GitHub Pages.</p>
  <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem;">
    <input id="q" placeholder="Cerca un animale...">
    <select id="filterClass">
      <option value="">Tutte le classi</option>
      <option>Mammiferi</option>
      <option>Invertebrati</option>
    </select>
    <button id="btnRandom">üé≤ Animale casuale</button>
  </div>
  <div id="view"></div>
</main>
<div class="toast" id="toast"></div>

<script>
const ANIMALS = [
  {
    id:"panda",
    name:"Panda gigante",
    scientific:"Ailuropoda melanoleuca",
    class:"Mammiferi",
    emoji:"üêº",
    habitat:"Foreste di bamb√π, Cina",
    description:"Ama i germogli di bamb√π e passa gran parte della giornata a mangiare. √à un simbolo della conservazione."
  },
  {
    id:"tigre",
    name:"Tigre del Bengala",
    scientific:"Panthera tigris tigris",
    class:"Mammiferi",
    emoji:"üêØ",
    habitat:"Foreste e praterie del subcontinente indiano",
    description:"Predatore solitario e potente. Le sue strisce sono uniche come impronte digitali."
  },
  {
    id:"polpo",
    name:"Polpo comune",
    scientific:"Octopus vulgaris",
    class:"Invertebrati",
    emoji:"üêô",
    habitat:"Mari temperati e tropicali",
    description:"Cefalopode intelligente e maestro del mimetismo. Riesce ad aprire barattoli e risolvere problemi."
  }
];

const THEMES = ["theme-foresta","theme-savana","theme-oceano"];
function applyTheme(theme){
  document.body.classList.remove(...THEMES);
  document.body.classList.add(theme);
}

function themeFromHabitat(h){
  const t = h.toLowerCase();
  if(t.includes("foreste")||t.includes("bamb√π")) return "theme-foresta";
  if(t.includes("praterie")||t.includes("india")) return "theme-savana";
  if(t.includes("mari")||t.includes("oceano")) return "theme-oceano";
  return "theme-foresta";
}

function cardTpl(a){
  return `<div class="card" onclick="showDetail('${a.id}')">
    <div class="thumb">${a.emoji}</div>
    <h3>${a.name}</h3>
    <i>${a.scientific}</i>
  </div>`;
}

function listTpl(list){
  return `<div class="grid">${list.map(cardTpl).join("")}</div>`;
}

function detailTpl(a){
  return `<div class="card">
    <div class="thumb">${a.emoji}</div>
    <h2>${a.name}</h2>
    <i>${a.scientific}</i>
    <p><b>Habitat:</b> ${a.habitat}</p>
    <p>${a.description}</p>
    <button onclick="renderHome()">‚¨Ö Torna alla home</button>
  </div>`;
}

function renderHome(){
  applyTheme(THEMES[Math.floor(Math.random()*THEMES.length)]);
  document.querySelector("#view").innerHTML = listTpl(ANIMALS);
}

function showDetail(id){
  const a = ANIMALS.find(x=>x.id===id);
  if(!a) return;
  applyTheme(themeFromHabitat(a.habitat));
  document.querySelector("#view").innerHTML = detailTpl(a);
}

function showToast(msg){
  const t = document.querySelector("#toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2000);
}

document.querySelector("#btnRandom").addEventListener("click",()=>{
  const rand = ANIMALS[Math.floor(Math.random()*ANIMALS.length)];
  showToast("Hai pescato: "+rand.name+"!");
  showDetail(rand.id);
});

document.querySelector("#q").addEventListener("input",e=>{
  const q = e.target.value.toLowerCase();
  const cls = document.querySelector("#filterClass").value;
  const list = ANIMALS.filter(a=>{
    return (!q||a.name.toLowerCase().includes(q)||a.habitat.toLowerCase().includes(q))
      &&(!cls||a.class===cls);
  });
  document.querySelector("#view").innerHTML = listTpl(list);
});

document.querySelector("#filterClass").addEventListener("change",()=>{
  document.querySelector("#q").dispatchEvent(new Event("input"));
});

window.addEventListener("keydown",e=>{
  if(e.key.toLowerCase()==="r"){
    document.querySelector("#btnRandom").click();
  }
});

renderHome();
</script>
</body>
</html>
